var hamburger_status=0;$("#backtop").length&&$("#backtop").hide();var nbUnreadArticles=0;
$(document).ready(function(){toggleBacktop();$("#pagination").remove();$("#main").length&&($(window).data("ajaxready",!0),$("#main").append('<div id="loader">'+_t("LOADING")+"</div>"),$(window).data("page",1),$(window).data("nblus",0));0==$(window).scrollTop()&&scrollInfini(!0);if($(".settingsPage").length){$("input[name='articleDisplayContent']").length&&$("input[name='articleDisplayContent']").click(function(){toggleArticleView()});var a=window.location.hash;a.length&&toggleBlocks(a)}nbUnreadArticles=
parseInt($("#nbUnreadArticles").html())});$(document).scroll(function(){toggleBacktop();scrollInfini()});function getUrlVars(){for(var a=[],b,d=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),c=0;c<d.length;c++)b=d[c].split("="),a.push(b[0]),b[1]?(rehash=b[1].split("#"),a[b[0]]=rehash[0]):a[b[0]]="";return a}function toggleBacktop(){var a=parseInt($(window).height());$(document).scrollTop()>=a/3?$("#backtop").show():$("#backtop").hide()}
function scrollInfini(a){"undefined"===typeof a&&(a=!1);var b=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/);if($("#main").length&&!1!=$(window).data("ajaxready")&&($(window).scrollTop()+$(window).height()+1>=$(document).height()||b&&$(window).scrollTop()+$(window).height()+150>$(document).height()||a)){$(window).data("ajaxready",!1);$("#main #loader").show();a=getUrlVars().action;var b=getUrlVars().folder,d=getUrlVars().feed,c=getUrlVars().order,c=c?"&order="+c:"";$.ajax({url:"./article.php",
type:"post",data:"scroll="+$(window).data("page")+"&nblus="+$(window).data("nblus")+"&hightlighted=1&action="+a+"&folder="+b+"&feed="+d+c,success:function(a){""!=a.replace(/^\s+/g,"").replace(/\s+$/g,"")?($("#main #loader").before(a),$("#main .scriptaddbutton").remove(),$("#main article.scroll").fadeIn(600),$("#main article.scroll").removeClass("scroll"),$(window).data("ajaxready",!0),$(window).data("page",$(window).data("page")+1),$(window).data("enCoursScroll",0),0==$(window).scrollTop()&&scrollInfini()):
$("#loader").remove()}});$("#main #loader").fadeOut(400)}}function _t(a,b){value=i18n[a];if(null!=b)for(i=0;i<b.length;i++)value=value.replace("$"+(i+1),b[i]);return value}function toggleFolder(a,b){var d=$("ul",$(a).parent()),c=0;"none"==d.css("display")&&(c=1);d.slideToggle(200);$(a).html(c?"\u25bc":"\u25ba")}
function renameFolder(a,b){var d=$(a).parent().parent(),c=$("h1:first span",d),d=$("h1:first",d),c=c.html();$(a).html(_t("SAVE"));$(a).attr("onclick","saveRenameFolder(this,"+b+")");d.replaceWith('<td><input type="text" class="rename" name="folderName" value="'+c+'"/></td>')}
function saveRenameFolder(a,b){var d=$(a).parent().parent(),d=$("td:first",d),c=$("input",d).val();$(a).html(_t("RENAME"));$(a).attr("onclick","renameFolder(this,"+b+")");d.replaceWith("<td><h1><span>"+c+"</span></h1></td>");$.ajax({url:"./action.php?action=renameFolder",data:{id:b,name:c}})}$("#feedList").addClass("js").before('<div id="menu"><img src="./templates/greeder/img/ham.svg" alt="Feed list" onerror="this.removeAttribute(\'onerror\'); this.src=\'./templates/greeder/img/ham.png\'"></div>');
$("#menu").click(function(){$("#feedList").slideToggle(200);hamburger_status=1-hamburger_status});$(window).resize(function(){1==hamburger_status&&850>window.innerWidth?$("#feedList").css("display","block"):850>window.innerWidth&&$("#feedList").css("display","none");850<window.innerWidth&&$("#feedList").css("display","block")});
function addFavorite(a,b){var d=$("#pageTop").html();$.ajax({url:"./action.php?action=addFavorite",data:{id:b},success:function(c){"noconnect"==c.status?alert(c.texte):($(".favs",$(a).parent().parent()).attr("onclick","removeFavorite(this,"+b+");"),$(a).parent().parent().addClass("favorised"),"favorites"==d&&($(window).data("nblus",$(window).data("nblus")-1),$("#nbarticle").html(parseInt($("#nbarticle").html())+1)))}})}
function removeFavorite(a,b){var d=$("#pageTop").html();$.ajax({url:"./action.php?action=removeFavorite",data:{id:b},success:function(c){"noconnect"==c.status?alert(c.texte):($(".favs",$(a).parent().parent()).attr("onclick","addFavorite(this,"+b+");"),$(a).parent().parent().removeClass("favorised"),"favorites"==d&&($(window).data("nblus",$(window).data("nblus")+1),$("#nbarticle").html(parseInt($("#nbarticle").html())-1)))}})}
function readThis(a,b,d,c){"undefined"===typeof c&&(c=!1);var e=$("#pageTop").html(),f=$(a).parent().parent();$("#"+b).next();f.hasClass("eventRead")?"title"!=d&&$.ajax({url:"./action.php?action=unreadContent",data:{id:b},success:function(a){"noconnect"==a.status?alert(a.texte):(window.nbUnreadArticles++,$("#nbUnreadArticles").html(window.nbUnreadArticles),f.removeClass("eventRead"),""!=e&&"selectedFolder"!=e||$(window).data("nblus",$(window).data("nblus")-1),c&&c())}}):$.ajax({url:"./action.php?action=readContent",
data:{id:b},success:function(a){if("noconnect"==a.status)alert(a.texte);else switch(window.nbUnreadArticles--,$("#nbUnreadArticles").html(window.nbUnreadArticles),e){case "":f.addClass("eventRead");f.fadeOut(200,function(){c&&c();"display: none;"==$("article section:last").attr("style")&&$(window).scrollTop($(document).height())});$(window).data("nblus",$(window).data("nblus")+1);$("#nbarticle").html(parseInt($("#nbarticle").html())-1);break;case "selectedFolder":f.addClass("eventRead");$(window).data("nblus",
$(window).data("nblus")+1);c&&c();break;default:f.addClass("eventRead"),c&&c()}}})}
function toggleArticleDisplayMode(a,b){var d=$(".summary",$("#"+b).parent()),c=$(".content",$("#"+b).parent()),e=$(".articleDetails",$("#"+b).parent());0<d.length&&"display: none;"!=d.attr("style")?(action="content",0==$.trim(c.text()).length?$.ajax({url:"./action.php?action=articleDisplayMode&articleDisplayMode="+action+"&event_id="+b,success:function(b){"noconnect"==b.status?alert(b.texte):(console&&console.log&&""!=b&&console.log(b),d.hide(),c.html(b),c.show(200),a.innerHTML="-",a.title=_t("EVENT_DISPLAY_CONTENT"),
e.last().show(200))}}):(d.hide(),c.show(200),a.innerHTML="-",a.title=_t("EVENT_DISPLAY_CONTENT"),e.last().show(200))):0<c.length&&"display: none;"!=c.attr("style")?(c.hide(200),a.innerHTML="+",a.title=_t("EVENT_DISPLAY_TITLE"),1<e.length&&e.last().hide(200)):(action="summary",0==$.trim(d.text()).length?$.ajax({url:"./action.php?action=articleDisplayMode&articleDisplayMode="+action+"&event_id="+b,success:function(b){"noconnect"==b.status?alert(b.texte):(console&&console.log&&""!=b&&console.log(b),
d.html(b),d.show(200),a.innerHTML="++",a.title=_t("EVENT_DISPLAY_SUMMARY"))}}):(d.show(200),a.innerHTML="++",a.title=_t("EVENT_DISPLAY_SUMMARY")))}
function renameFeed(a,b){var d=$(a).parent().parent(),c=$("td.loopFoldersSettingsName",d),e=$("a",c).html(),d=$("td.loopFoldersSettingsLink",d),f=$("a",d).html(),g=c.attr("href");$(a).html(_t("SAVE"));$(a).attr("onclick","saveRenameFeed(this,"+b+',"'+g+'")');c.replaceWith('<td class="loopFoldersSettingsName"><input type="text" name="feedName" value="'+e+'"/></td>');d.replaceWith('<td class="loopFoldersSettingsLink shorten"><input type="text" name="feedUrl" value="'+f+'" /></td>')}
function saveRenameFeed(a,b,d){var c=$(a).parent().parent(),e=$('td.loopFoldersSettingsName input[name="feedName"]',c),f=e.val(),c=$('td.loopFoldersSettingsLink input[name="feedUrl"]',c),g=c.val();$(a).html(_t("RENAME"));$(a).attr("onclick","renameFeed(this,"+b+")");e.replaceWith('<a href="'+d+'">'+f+"</a>");c.replaceWith('<a href="'+g+'">'+g+"</a></span>");$.ajax({url:"./action.php?action=renameFeed",data:{id:b,name:f,url:g}})}
function changeFeedFolder(a,b){var d=$(a).val();window.location="./action.php?action=changeFeedFolder&feed="+b+"&folder="+d}function synchronize(a,b){""!=a?($("main").html('<article><iframe class="importFrame" src="action.php?action=synchronize&amp;format=html&amp;code='+a+'" name="idFrameSynchro" id="idFrameSynchro" height="400"></iframe></article>'),"undefined"===typeof b&&(b=!1),b&&$("iframe#idFrameSynchro").load(function(){b()})):alert(_t("YOU_MUST_BE_CONNECTED_FEED"))}
function toggleBlocks(a){$(a).length?($("main section").hide(),$("section"+a).fadeToggle(200,function(){window.location.hash=a})):window.location.hash=""}function toggleFeedVerbose(a,b,d){$.ajax({url:"./action.php?action=displayFeedIsVerbose&displayFeedIsVerbose="+b+"&idFeed="+d,success:function(c){"noconnect"==c.status?alert(c.texte):(console&&console.log&&""!=c&&console.log(c),c=0,0==b&&(c=1),$(a).attr("onclick","toggleFeedVerbose(this,"+c+", "+d+");"))}})}
function toggleOptionFeedVerbose(a,b){$.ajax({url:"./action.php?action=optionFeedIsVerbose&optionFeedIsVerbose="+b,success:function(d){"noconnect"==d.status?alert(d.texte):(console&&console.log&&""!=d&&console.log(d),d=0,0==b&&(d=1),$(a).attr("onclick","toggleOptionFeedVerbose(this,"+d+");"),1==b?$(".feedVerbose").hide():$(".feedVerbose").show())}})};
//# sourceMappingURL=templates/greeder/js/js.min.js.map
